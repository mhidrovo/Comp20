<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Lottery</title>  
        <script language="javascript">
            function checkMatches(arr1, arr2) 
            {
                let matches = []
                for(i = 0; i < arr1.length; i++)
                {
                    for(j = 0; j < arr2.length; j++)
                    {
                        if(parseInt(arr1[i]) == parseInt(arr2[j]) && matches.indexOf(arr1[i]) == -1)
                        {
                            matches.push(parseInt((arr1[i])));
                        }
                    }
                }
                return matches;
            }
            function calculateFinalResult(num_matches, has_luckyball)
            {
                result = num_matches.length
                if(has_luckyball == 1 && result == 5)
                {
                    return ("$7000 a WEEK for LIFE")
                }
                else if (has_luckyball == 0 && result == 5)
                {
                    return("$25000 a YEAR for LIFE")
                }
                else if (has_luckyball == 1 && result == 4)
                {
                    return("$5000")
                }
                else if (has_luckyball == 0 && result == 4)
                {
                    return("$200")
                }
                else if (has_luckyball == 1 && result == 3)
                {
                    return("$150")
                }
                else if (has_luckyball == 0 && result == 3)
                {
                    return("$20")
                }
                else if (has_luckyball == 1 && result == 2)
                {
                    return("$25")
                }
                else if (has_luckyball == 0 && result == 2)
                {
                    return("$3")
                }
                else if (has_luckyball == 1 && result == 1)
                {
                    return("$6")
                }
                else if (has_luckyball == 1 && result == 0)
                {
                    return("$4")
                }
                else 
                {
                    return("$0")
                }
            }
        </script>
    </head>
    <body>
        <script language="javascript">
            arr_nums = [0];
            for (i = 0; i < 5; i++) 
            {
                arr_nums.push(Math.floor((Math.random() * 47 +1)));
            }
            lucky_ball = Math.floor(Math.random() * 17 + 1);
            raw_data = prompt("Please include five numbers followed", "");
            new_data = raw_data.split(" ");
            user_luck_num = parseInt(prompt("Please input your lucky number [0-18]", ""));
            document.write("List of numbers from magic ball <br />");
            nums_data = []
            for (i = 0; i < 5; i++) 
            {
                nums_data.push(parseInt(new_data[i]))
                document.write(arr_nums[i] + '<br />');
            }
            nums_data.sort(function(a, b){return a-b});
            document.write('Sorted input of numbers: <br />');
            for (i = 0; i < 5; i++) 
            {
                document.write(new_data[i] + '<br />');
            }
            let matches = checkMatches(nums_data, arr_nums);
            document.write('These are the matched numbers: <br />');
            for (i = 0; i < matches.length; i++) 
            {
                document.write(matches[i] + '<br />');
            }
            if(user_luck_num == lucky_ball)
            {
                document.write("<br /> <br /> Lucky ball matched! <br />");
                calculateFinalResult(1, nums_data);
            } 
            else
            {
                document.write(" <br /> Lucky ball did not match <br />");
                final_result = calculateFinalResult(0, nums_data);
                document.write("You final pay is: " + final_result)
            }
        </script>
    </body>
</html>